<!DOCTYPE html>
<html>
    <head>
        <title>Add Employees Page</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/js-cookie@beta/dist/js.cookie.min.js"></script>
    </head>
    <body>
    <div class="card" style="width: 800px; margin: auto; margin-top: 30px;">
        <div class="card-header" id="cardTitle"> Add Employees of the list</div>
        <div class="card-body">
            <form  name='myform'>
                <table>
                <tbody>
                    <tr id="name">
                        <td>Name *</td>
                        <td><input type="text" id="name-inp" name="name" value="" class="form-control" required/></td>
                    </tr>
                    <tr id="firstname">
                        <td>Firstname *</td>
                        <td><input type="text" id="firstname-inp" name="firstname" value="" class="form-control" required/></td>
                    </tr>
                    <tr id="telhome">
                        <td>Phone Home</td>
                        <td><input type="text" id="telhome-inp" name="telhome" value="" class="form-control" required/></td>
                    </tr>
                    <tr id="telmob">
                        <td>Phone Mobile</td>
                        <td><input type="text" id="telmob-inp" name="telmob" value="" class="form-control" required/></td>
                    </tr>
                    <tr id="telpro">
                        <td>Phone Pro</td>
                        <td><input type="text" id="telpro-inp" name="telpro" value="" class="form-control" required/></td>
                    </tr>
                    <tr id="adress">
                        <td>Address</td>
                        <td><input type="text" id="adress-inp" name="adress" value="" class="form-control" required/></td>
                    </tr>
                    <tr id="postcode">
                        <td>Postal code</td>
                        <td><input type="text" id="postalcode-inp" name="postalcode" value="" class="form-control" required/></td>
                    </tr>
                    <tr id="city">
                        <td>City</td>
                        <td><input type="text" id="city-inp" name="city" value="" class="form-control" required/></td>
                        <td>Email *</td>
                        <td><input type="text" id="email-inp" name="email" value="" class="form-control" required/></td>
                    </tr>

            </tbody>
           </table>    
                <div id="btn" style="display:inline-block"></div>
                <button type="button" id="btnCancel" name="btnCancel" class="btn btn-outline-primary float-right" style="display:inline-block">Cancel</button>
                    <script>
                        $("#btnCancel").click(function(ev){
                            window.location.href = "/se.abdmeziem-moutte.part3/listEmployees.html"
                        })
                    </script>
            </form>
        </div>
    </div>
    <script>
        if(Cookies.get('role') === 'admin')
            $("#btn").append(' <button type="button" id="btnUpdate" name="btnupdate" class="btn btn-primary">Save</button>')
        $("#btnUpdate").click(function(ev){
            event.preventDefault();
            const updtEmployees = {
                name:  $("#name-inp").val(),
                firstname: $("#firstname-inp").val(),
                telhome: $("#telhome-inp").val(),
                telmob: $("#telmob-inp").val(),
                telpro: $("#telpro-inp").val(),
                adress: $("#adress-inp").val(),
                postalcode: $("#postalcode-inp").val(),
                city: $("#city-inp").val(),
                email: $("#email-inp").val()
             }
             var myPost = $.post('http://localhost:8080/se.abdmeziem-moutte.part3/api/v1/employees/add', updtEmployees, function(resp) {
                 window.location.href = "/se.abdmeziem-moutte.part3/listEmployees.html";                   
             });
         })
        </script>
    </body>
</html>