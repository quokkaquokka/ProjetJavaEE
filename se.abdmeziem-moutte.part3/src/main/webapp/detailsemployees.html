<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    </head>
    <body>

        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script>
            function setList(item) {
                var isAdmin = 'disabled'
                $("#cardTitle").append('<h5 class="card-title"> Details of Employee: '+ item.firstname + ' '+ item.name + '</h5>')
                $("#id").append('<td><input type="text" name="id" value="' + item.objectID + '" class="form-control" readonly /></td>')
                $("#name").append('<td><input type="text" name="name" value="' + item.name +'" class="form-control"'+ isAdmin +' required/></td>')
                $("#firstname").append('<td><input type="text" name="firstname" value="' + item.firstname +'" class="form-control"'+ isAdmin +' required/></td>')
                $("#telhome").append('<td><input type="text" name="firstname" value="' + item.telhome +'" class="form-control"'+ isAdmin +' required/></td>')
                $("#telmob").append('<td><input type="text" name="firstname" value="' + item.telmob +'" class="form-control"'+ isAdmin +' required/></td>')
                $("#telpro").append('<td><input type="text" name="firstname" value="' + item.telpro +'" class="form-control"'+ isAdmin +' required/></td>')
                $("#adress").append('<td><input type="text" name="firstname" value="' + item.adress +'" class="form-control"'+ isAdmin +' required/></td>')
                $("#postcode").append('<td><input type="text" name="firstname" value="' + item.postalcode +'" class="form-control"'+ isAdmin +' required/></td>')
                $("#city").append('<td>City</td><td><input type="text" name="firstname" value="' + item.city +'" class="form-control"'+ isAdmin +' required/></td>')
                $("#city").append('<td>email *</td><td><input type="text" name="firstname" value="' + item.email +'" class="form-control"'+ isAdmin +' required/></td>')
            }  
        </script>
        <script>
            var url = window.location.search;
            console.log(url);
            var request = $.ajax({
              url: "http://localhost:8080/se.abdmeziem-moutte.part3/api/v1/employees/get/{"+ url.substring(url.lastIndexOf("=")+1) +"}",
              contentType: "application/json"
            })
            
            request.done(function (data) {
                  var employees = data.hits[0]
                  console.log('Employees : ' , employees)
                  setList(data.hits[0])
            });
            request.fail(function (jqXHR, textStatus) {
               console.log(textStatus, jqXHR);
            });
        </script>
 
        
        
        <div class="card" style="width: 800px; margin: auto; margin-top: 30px;">
            <div class="card-header" id="cardTitle"></div>
        <div class="card-body">
                <form  name='myform' action="ControllerDetailEmployee">
                    <table class="">
                    <tbody>
                         <tr id="id">
                            <td>ID</td>
                        </tr>
                        <tr id="name">
                            <td>Name *</td>
                        </tr>
                        <tr id="firstname">
                            <td>Firstname *</td>
                        </tr>
                        <tr id="telhome">
                            <td>Phone Home</td>
                        </tr>
                        <tr id="telmob">
                            <td>Phone Mobile</td>
                        </tr>
                        <tr id="telpro">
                            <td>Phone Pro</td>
                        </tr>
                        <tr id="adress">
                            <td>Address</td>
                        </tr>
                        <tr id="postcode">
                            <td>Postal code</td>
                        </tr>
                        <tr id="city"></tr>

                </tbody>
               </table>    
                    <!-- JUST ADMIN-->
                    <input type='submit' name='update' class="btn btn-primary">
                </form>
            </div>
        </div>
        
        
        <!-- delete modal -->
            <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="deleteModalTitle">Confirm delete</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-footer">
                            <input type="submit" name="delete" class="btn btn-danger" value="Confirm">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
    </body>
</html>
